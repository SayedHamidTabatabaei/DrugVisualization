{% extends 'base.html' %}

{% block title %}Compare - {% endblock %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/grid.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/button.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/dropdown.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/checkbox.css') }}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/tab.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/radiobutton.css') }}">

{% endblock %}

{% block script %}
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="{{ url_for('static', filename='js/fill_train_model_dropdown.js') }}"></script>
<script src="{{ url_for('static', filename='js/compare.js') }}"></script>
{% endblock %}


{% block content %}
<h2>Comparing Training data</h2>

<!-- Dropdown and button -->
<div>
    <div class="property-container">
        <label for="trainModelSelect" class="label-for">Choose a property:</label>

        <select id="trainModelSelect">
            <option value="">--Select an property--</option>
            <!-- Add more options as needed -->
        </select>
        <button id="submitBtn" onclick="get_history()">Submit</button>
    </div>

</div>
<div class="grid-container">
    <table id="selectableTrainTable" class="datagrid-table; display">
        <thead>
            <tr>
                <th rowspan="2"></th>
                <th rowspan="2">Name</th>
                <th rowspan="2">Loss</th>
                <th rowspan="2">Accuracy</th>
                <th rowspan="2">Loss</th>

                <!-- F1 Score Group -->
                <th colspan="3">F1 Score</th>

                <!-- AUC Group -->
                <th colspan="3">AUC</th>

                <!-- AUPR Group -->
                <th colspan="3">AUPR</th>

                <!-- Recall Group -->
                <th colspan="3">Recall</th>

                <!-- Precision Group -->
                <th colspan="3">Precision</th>
            </tr>
            <tr>
                <!-- F1 Score sub-columns -->
                <th>W</th>
                <th>Mi</th>
                <th>Ma</th>

                <!-- AUC sub-columns -->
                <th>W</th>
                <th>Mi</th>
                <th>Ma</th>

                <!-- AUPR sub-columns -->
                <th>W</th>
                <th>Mi</th>
                <th>Ma</th>

                <!-- Recall sub-columns -->
                <th>W</th>
                <th>Mi</th>
                <th>Ma</th>

                <!-- Precision sub-columns -->
                <th>W</th>
                <th>Mi</th>
                <th>Ma</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be populated by DataTables -->
        </tbody>
    </table>
</div>

<div class="tab-container">
    <div class="tab-row">
        <div class="tab-label" style="flex-basis: 54%;">Main results</div>
        <div class="tab-label" style="flex-basis: 46%;">Per Category results</div>
    </div>

    <div class="tab-row">
        <div id="accuracy" class="tab active" onclick="openTab(event, 'accuracy-tab');fill_comparing_plot('accuracy');">Accuracy</div>
        <div id="loss" class="tab" onclick="openTab(event, 'loss-tab');fill_comparing_plot('loss');">Loss</div>
        <div id="f1_score" class="tab" onclick="openTab(event, 'f1_score-tab');fill_comparing_plot('f1_score', 'f1_score_radio_group');">F1 Score</div>
        <div id="auc" class="tab" onclick="openTab(event, 'auc-tab');fill_comparing_plot('auc', 'auc_radio_group');">AUC</div>
        <div id="aupr" class="tab" onclick="openTab(event, 'aupr-tab');fill_comparing_plot('aupr', 'aupr_radio_group');">AUPR</div>
        <div id="recall" class="tab" onclick="openTab(event, 'recall-tab');fill_comparing_plot('recall', 'recall_radio_group');">Recall</div>
        <div id="precision" class="tab" onclick="openTab(event, 'precision-tab');fill_comparing_plot('precision', 'precision_radio_group');">Precision</div>

        <div id="details_accuracy" class="tab" onclick="openTab(event, 'details_accuracy-tab');fill_comparing_plot('details_accuracy');">Accuracy</div>
        <div id="details_f1_score" class="tab" onclick="openTab(event, 'details_f1_score-tab');fill_comparing_plot('details_f1_score');">F1 Score</div>
        <div id="details_auc" class="tab" onclick="openTab(event, 'details_auc-tab');fill_comparing_plot('details_auc');">AUC</div>
        <div id="details_aupr" class="tab" onclick="openTab(event, 'details_aupr-tab');fill_comparing_plot('details_aupr');">AUPR</div>
        <div id="details_recall" class="tab" onclick="openTab(event, 'details_recall-tab');fill_comparing_plot('details_recall');">Recall</div>
        <div id="details_precision" class="tab" onclick="openTab(event, 'details_precision-tab');fill_comparing_plot('details_precision');">Precision</div>
    </div>
    <div id="accuracy-tab" class="tab-content active">
        <div id="accuracy-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Accuracy} = \frac{\text{True Positives} + \text{True Negatives}}{\text{Total Number of Samples}}\)
                </span>
            </p>
            <img width="500px;" id="accuracy-plot"/>
            <table id="accuracy-table" class="display">
                <thead>
                    <tr id="accuracy-tableHeaders"></tr>
                </thead>
                <tbody id="accuracy-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="loss-tab" class="tab-content">
        <div id="loss-container">
            <p>
                <span style="font-size: 1.2em;">

                </span>
            </p>
            <img width="500px;" id="loss-plot"/>
            <table id="loss-table" class="display">
                <thead>
                    <tr id="loss-tableHeaders"></tr>
                </thead>
                <tbody id="loss-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="f1_score-tab" class="tab-content">
        <div id="f1_score-container">
            <div id="f1_scoreRadioContainer" class="radioButtonsContainer">
                <input type="radio" id="f1_score_weighted" name="f1_score_radio_group" value="f1_score_weighted" checked onclick="fill_comparing_plot('f1_score', 'f1_score_radio_group');">
                <label for="f1_score_weighted">Weighted</label><br>
                <input type="radio" id="f1_score_micro" name="f1_score_radio_group" value="f1_score_micro" onclick="fill_comparing_plot('f1_score', 'f1_score_radio_group');">
                <label for="f1_score_micro">Micro</label><br>
                <input type="radio" id="f1_score_macro" name="f1_score_radio_group" value="f1_score_macro" onclick="fill_comparing_plot('f1_score', 'f1_score_radio_group');">
                <label for="f1_score_macro">Macro</label><br>
            </div>
            <hr/>
            <p>
                <span style="font-size: 1.2em;">
                    \(F1 = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}\)
                </span>
            </p>
            <img width="500px;" id="f1_score-plot"/>
            <table id="f1_score-table" class="display">
                <thead>
                    <tr id="f1_score-tableHeaders"></tr>
                </thead>
                <tbody id="f1_score-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="auc-tab" class="tab-content">
        <div id="auc-container">
            <div id="aucRadioContainer" class="radioButtonsContainer">
                <input type="radio" id="auc_weighted" name="auc_radio_group" value="auc_weighted" checked onclick="fill_comparing_plot('auc',
                'auc_radio_group');">
                <label for="auc_weighted">Weighted</label><br>
                <input type="radio" id="auc_micro" name="auc_radio_group" value="auc_micro" onclick="fill_comparing_plot('auc',
                'auc_radio_group');">
                <label for="auc_micro">Micro</label><br>
                <input type="radio" id="auc_macro" name="auc_radio_group" value="auc_macro" onclick="fill_comparing_plot('auc',
                'auc_radio_group');">
                <label for="auc_macro">Macro</label><br>
            </div>
            <hr/>
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{AUC} = \int_{0}^{1} \text{TPR}(FPR) \, d(\text{FPR})\)
                </span>
            </p>
            <img width="500px;" id="auc-plot"/>
            <table id="auc-table" class="display">
                <thead>
                    <tr id="auc-tableHeaders"></tr>
                </thead>
                <tbody id="auc-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="aupr-tab" class="tab-content">
        <div id="aupr-container">
            <div id="auprRadioContainer" class="radioButtonsContainer">
                <input type="radio" id="aupr_weighted" name="aupr_radio_group" value="aupr_weighted" checked onclick="fill_comparing_plot('aupr',
                'aupr_radio_group');">
                <label for="aupr_weighted">Weighted</label><br>
                <input type="radio" id="aupr_micro" name="aupr_radio_group" value="aupr_micro" onclick="fill_comparing_plot('aupr',
                'aupr_radio_group');">
                <label for="aupr_micro">Micro</label><br>
                <input type="radio" id="aupr_macro" name="aupr_radio_group" value="aupr_macro" onclick="fill_comparing_plot('aupr',
                'aupr_radio_group');">
                <label for="aupr_macro">Macro</label><br>
            </div>
            <hr/>
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{AUPR} = \int_{0}^{1} \text{Precision}(\text{Recall}) \, d(\text{Recall})\)
                </span>
            </p>
            <img width="500px;" id="aupr-plot"/>
            <table id="aupr-table" class="display">
                <thead>
                    <tr id="aupr-tableHeaders"></tr>
                </thead>
                <tbody id="aupr-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="recall-tab" class="tab-content">
        <div id="recall-container">
            <div id="recallRadioContainer" class="radioButtonsContainer">
                <input type="radio" id="recall_weighted" name="recall_radio_group" value="recall_weighted" checked onclick="fill_comparing_plot('recall',
                'recall_radio_group');">
                <label for="recall_weighted">Weighted</label><br>
                <input type="radio" id="recall_micro" name="recall_radio_group" value="recall_micro" onclick="fill_comparing_plot('recall',
                'recall_radio_group');">
                <label for="recall_micro">Micro</label><br>
                <input type="radio" id="recall_macro" name="recall_radio_group" value="recall_macro" onclick="fill_comparing_plot('recall',
                'recall_radio_group');">
                <label for="recall_macro">Macro</label><br>
            </div>
            <hr/>
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Recall} = \frac{\text{True Positives}}{\text{True Positives} + \text{False Negatives}}\)
                </span>
            </p>
            <img width="500px;" id="recall-plot"/>
            <table id="recall-table" class="display">
                <thead>
                    <tr id="recall-tableHeaders"></tr>
                </thead>
                <tbody id="recall-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="precision-tab" class="tab-content">
        <div id="precision-container">
            <div id="precisionRadioContainer" class="radioButtonsContainer">
                <input type="radio" id="precision_weighted" name="precision_radio_group" value="precision_weighted" checked
                       onclick="fill_comparing_plot('precision',
                'precision_radio_group');">
                <label for="precision_weighted">Weighted</label><br>
                <input type="radio" id="precision_micro" name="precision_radio_group" value="precision_micro" onclick="fill_comparing_plot('precision',
                'precision_radio_group');">
                <label for="precision_micro">Micro</label><br>
                <input type="radio" id="precision_macro" name="precision_radio_group" value="precision_macro" onclick="fill_comparing_plot('precision',
                'precision_radio_group');">
                <label for="precision_macro">Macro</label><br>
            </div>
            <hr/>
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Precision} = \frac{\text{True Positives}}{\text{True Positives} + \text{False Positives}}\)
                </span>
            </p>
            <img width="500px;" id="precision-plot"/>
            <table id="precision-table" class="display">
                <thead>
                    <tr id="precision-tableHeaders"></tr>
                </thead>
                <tbody id="precision-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_accuracy-tab" class="tab-content">
        <div id="details_accuracy-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Accuracy}_c = \frac{\text{TP}_c}{\text{TP}_c + \text{FN}_c}\)
                </span>
            </p>
            <img width="500px;" id="details_accuracy-plot"/>
            <table id="details_accuracy-table" class="display">
                <thead>
                    <tr id="details_accuracy-tableHeaders"></tr>
                </thead>
                <tbody id="details_accuracy-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_f1_score-tab" class="tab-content">
        <div id="details_f1_score-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(F1 = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}\)
                </span>
            </p>
            <img width="500px;" id="details_f1_score-plot"/>
            <table id="details_f1_score-table" class="display">
                <thead>
                    <tr id="details_f1_score-tableHeaders"></tr>
                </thead>
                <tbody id="details_f1_score-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_auc-tab" class="tab-content">
        <div id="details_auc-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{AUC} = \int_{0}^{1} \text{TPR}(FPR) \, d(\text{FPR})\)
                </span>
            </p>
            <img width="500px;" id="details_auc-plot"/>
            <table id="details_auc-table" class="display">
                <thead>
                    <tr id="details_auc-tableHeaders"></tr>
                </thead>
                <tbody id="details_auc-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_aupr-tab" class="tab-content">
        <div id="details_aupr-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{AUPR} = \int_{0}^{1} \text{Precision}(\text{Recall}) \, d(\text{Recall})\)
                </span>
            </p>
            <img width="500px;" id="details_aupr-plot"/>
            <table id="details_aupr-table" class="display">
                <thead>
                    <tr id="details_aupr-tableHeaders"></tr>
                </thead>
                <tbody id="details_aupr-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_recall-tab" class="tab-content">
        <div id="details_recall-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Recall}_c = \frac{\text{True Positives}_c}{\text{True Positives}_c + \text{False Negatives}_c}\)
                </span>
            </p>
            <img width="500px;" id="details_recall-plot"/>
            <table id="details_recall-table" class="display">
                <thead>
                    <tr id="details_recall-tableHeaders"></tr>
                </thead>
                <tbody id="details_recall-tableBody"></tbody>
            </table>
        </div>
    </div>
    <div id="details_precision-tab" class="tab-content">
        <div id="details_precision-container">
            <p>
                <span style="font-size: 1.2em;">
                    \(\text{Precision}_c = \frac{\text{True Positives}_c}{\text{True Positives}_c + \text{False Positives}_c}\)
                </span>
            </p>
            <img width="500px;" id="details_precision-plot"/>
            <table id="details_precision-table" class="display">
                <thead>
                    <tr id="details_precision-tableHeaders"></tr>
                </thead>
                <tbody id="details_precision-tableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<div id="plots"></div>

{% endblock %}
